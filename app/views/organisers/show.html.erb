
<div>
  Welcome <%= @organiser.name %> 
</div>

<h4> <%= link_to "Similar to you", similar_path(@organiser) %> </h4>

<br>

<h2> Recommended Events </h2>
<% @recommended_events.each do |r| %>
  <%= r.title %>
<% end %>

<% if @organiser.events.count != 0 %>
  <h2> Events You're Hosting </h2>
<% end %>

<% @events.each do |e| %>
  <% if e.organiser == current_organiser %>
    <h3> <%= link_to e.title, organiser_event_path(e.organiser, e) %> </h3>
    <div> <b> Starts: </b> <%= e.start_date %> </div>
    <h4> <%= link_to e.url, "http://#{e.url}" %> </h4>
    <div> <%= truncate(e.description, :length => 200) %> 
      <%= link_to "(Continue)", organiser_event_path(e.organiser, e) %> </div>

    <h4> Hosted by: <%=link_to e.organiser.name, organiser_profile_path(e.organiser) %> </h4>

    <div> <b> People going to this event: </b>
      <%= e.organiser.name %>
      <% e.members.each do |m| %>
        , <%= m.name %>
      <% end %>
    </div>

  <% end %>
<% end %>

<br>

<% if @organiser.events.count != 0 %>
  <h2> All Other Events </h2>
<% else %>
  <h2> All Events </h2>
<% end %>

<% @events.each do |e| %>
  <% if e.organiser != current_organiser %>
    <h3> <%= link_to e.title, organiser_event_path(e.organiser, e) %> </h3>
    <div> <b> Starts: </b> <%= e.start_date %> </div>
    <h4> <%= link_to e.url, "http://#{e.url}" %> </h4>
    <div> <%= truncate(e.description, :length => 200) %> 
      <%= link_to "(Continue)", organiser_event_path(e.organiser, e) %> </div>

    <h4> Hosted by: <%=link_to e.organiser.name, organiser_profile_path(e.organiser) %> </h4>


    <% if e.members.include?(current_organiser) %>
      <div class="float-left"> <%= button_to "Cancel Attendance", cancel_organiser_happening_path(current_organiser, e), :class => "btn btn-success disabled" %> </div>
    <% else %>
     <div class="float-left"> <%= button_to "Attend", join_organiser_happening_path(current_organiser, e), :class => "btn btn-success" %> </div> 
    <% end %>


    <div> <%= button_to "Not Interested", organiser_path(current_organiser), :method => :get, :class => "btn btn-danger" %> </div>
  
    <div> <b> People going to this event: </b>
      <%=link_to e.organiser.name.strip, organiser_profile_path(e.organiser)%>
      <%e.members.each do |m|%>
        <%=link_to ", #{m.name.strip}", organiser_profile_path(m)%>
      <%end%>
    </div>

  <% end %>
<% end %>

<div class="end-padding"> </div>